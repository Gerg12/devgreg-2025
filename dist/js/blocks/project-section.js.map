{"version":3,"sources":["blocks/project-section.js"],"names":["registerBlockType","wp","blocks","_wp$editor","RichText","MediaUpload","_wp$components","TextControl","Button","withSelect","data","title","icon","category","attributes","imageUrl","type","default","imageAlt","blockText","blockTitle","allProjectsLink","projects","edit","select","_select","categories","getEntityRecords","slug","per_page","id","_ref","setAttributes","onAllProjectsLinkChange","React","createElement","className","onSelect","render","_ref2","open","onClick","value","maxWidth","tagName","src","alt","style","onChange","placeholder","length","map","project","onBlockTitleChange","rendered","dangerouslySetInnerHTML","excerpt","href","save","_ref3","console","log","Content","key","__html","link"],"mappings":"aAAA,IAAQA,kBAAsBC,GAAGC,OAAzBF,kBACRG,WACCC,GAAAA,OAFDA,SAAQJ,WAARI,SACAC,YAAAF,WAAAE,YAIAC,eAECC,GAAAA,WAFDC,OAAAF,eAAAE,OAECD,YADMD,eACNC,YAEOE,WAAkBC,GAAlBD,KAAAA,WAGRT,kBAAkB,sCAAuC,CACxDW,MAAK,kBACLC,KAAI,YACJC,SAAQ,SACRC,WAAU,CACTC,SAAQ,CACPC,KAAAA,SACAC,QAAA,EACD,EACAC,SAAQ,CACPF,KAAAA,SACAC,QAAA,EACD,EACAE,UAAS,CACRH,KAAAA,SACAC,QAAA,EACD,EACAG,WAAU,CACTJ,KAAAA,SACAC,QAAA,EACD,EACAI,gBAAe,CACdL,KAAAA,SACAC,QAAA,EACD,EACAK,SAAQ,CACPN,KAAAA,QACAC,QAAA,EACD,CACD,EACAM,KAAId,WAAY,SAACe,GAChB,IAAAC,EAA0CD,EAAC,MAAA,EAA3CC,iBAEAC,EAAAC,EAAA,WAAA,WAAA,CAECC,KADKF,UAEN,CAAC,EAEDJ,EAAY,GASZ,MACCI,CAAAA,WAAAA,EACAJ,UARAA,EAFDI,GAAmC,EAArBA,EAAIA,OAETC,EAAGA,WAAiB,UAAY,CACvCE,SAAAA,EACAH,WAHuBA,EAAa,GAAGI,EAIxC,CAAC,EAMDR,IAAA,EACF,CAAA,CAAC,EAA+C,SAAAS,GAAhC,IAAgCjB,EAA1CA,EAA0CA,WAAhCkB,EAAVlB,EAAUkB,cAAVlB,EAAUiB,EAAVjB,SAAYkB,EAEhBlB,EAFgBkB,SAAAA,GAEhBlB,EAF6BI,SAE7BJ,EAFgBkB,WAAaZ,EAE7BN,EAF6BM,WAAAC,EAE7BP,EAF6BO,gBA6B9B,OAVAC,GAAgC,EAA1BW,EAAAA,QAMLD,EALAA,CAAaV,SAAAA,CAAC,CAAA,EASVA,EAKJY,MAAAC,cAAA,MAAA,CAT2BC,UAAA,0BAAA,EAC5BF,MAAAC,cAAA,MAAA,CAAAC,UAAA,wBAAA,EAGAF,MAAAC,cAAA,MAAA,CAAKb,UAAU,8BAAA,EACdY,MAAAC,cAAA9B,YAAA,CACDgC,SA7BCvB,SAAAA,GAGAkB,EAJoC,CAKnCjB,SALqCK,EACtCN,IAKCI,SANiDG,EAAAA,GAOlD,CAJD,CAKA,EAwBAL,KAAA,QACMoB,MAASrB,EAA2BuB,OAAA,SAAAC,GAAAC,EACxCN,EADwCM,KACxCN,OAAKE,MAAAA,cAAAA,OAAS,CAACK,QAAAD,CAAA,EAAA,cAAA,CAAA,CAAwB,CACjCJ,EAAwCrB,GAE1CsB,MAAAA,cAAAA,MAAAA,CACArB,IAAKD,EACL2B,IAAO3B,gBACPuB,MAAQ,CAAAK,SAARL,MAAM,CAAA,CAAA,EAYRJ,MAAAC,cAAC/B,SAXyB,CAAqBgC,UAAA,wBAE5CQ,QACD7B,IAEC8B,MAAK9B,EACL+B,SAzCWA,SAAAA,GAKjBd,EAJE,CAAAb,UAAAuB,CAAA,CAAA,CAKH,EAoCOK,YAAO,kBAAA,CAUT,CAV4B,EAC1Bb,MAAAC,cAAA,MAAA,CACDC,UAAA,+BAEO,EACRA,MAAAA,cAAAA,SAAS,CACTQ,UAAQ,+BACRF,QAAOvB,KACP6B,MAAQ5B,EACR6B,SA9CU,SAAAP,GAIdV,EAJyB,CAAEU,WAAAA,CAAAA,CAAAA,CAK5B,EA2CSO,YAAA,mBACNd,CAAKC,EAAyCF,MAAAC,cAAA,KAAA,CAAAC,UAC7CF,uBAAC9B,EACAgC,GAAU,EAAAd,EAAA4B,OACVN,EAAQO,IAAI,SAAAC,GAAA,OACZV,MAAAA,cAAAA,KAAAA,CAAOtB,IAAAA,EAAWU,GAAAM,UAAA,uBAAA,EAClBY,MAAAA,cAAAA,KAAAA,CAAQZ,UAAEiB,6BAAmB,EAC7BJ,EAAYtC,MAAA2C,QACX,EACElB,MAAAA,cAAAA,MAAAA,CAASA,UAAC,2BAAA,EACZd,MAAAA,cAAAA,MAAAA,CACqBc,UAAA,iCACbmB,wBAAa,CAACnB,OAAUgB,EAAAI,QAAAF,QAAuB,CAAA,CACjDlB,EACFgB,MAAAA,cAAAA,IAAAA,CAAAA,KAAQzC,EAAM2C,KACXlB,UAAA,4BACL,EAAA,eAA0C,CAExCA,CACAmB,CAAAA,CASH,EANIrB,MAAAC,cAAA,KAAA,KAAA,oBACFA,CAAuBC,EAAsCF,MAAAC,cAAA5B,YAAC,CAK/D6B,UAAA,qCAMHA,MAAAA,EACAM,SAhFsB,SAAAA,GAK1BV,EAJAA,CAAaX,gBAACqB,CAAA,CAAA,CAKf,EA2EKM,YAAUf,+BAAwB,CAClCgB,EACCf,MAAAC,cAAA,IAAA,CAEDsB,KAAMpC,EACNe,UAAU,yCAAA,EACV,kBAQA,CAAGtB,CAEPC,CACAG,EA1FDgB,MAAAC,cAAA,IAAA,KAAA,qBAAA,CAsFD,CAAC,EACDuB,KAMErC,SANEsC,GAQC7C,IAFHO,EAAAA,EAAAA,WAJAN,EAaOqB,EAbPrB,SACAG,EAYOkB,EAZPlB,SACAC,EAWOiB,EAXPjB,UACAC,EAUOgB,EAVPhB,WACAC,EASOe,EATPf,gBACAC,EAQOc,EARPd,SAKD,OAFAsC,QAQSC,IAAE9C,sBAASD,CAAA,EALnBoB,MAAAC,cAAA,MAAA,CASIC,UAAA,0BACAhC,EATH8B,MAAAC,cAAA,MAAA,CAUGC,UAAU,wBAAuB,EATnCF,MAAAC,cAAA,MAAA,CAUES,UAAW,8BAAA,EACXF,GAEIR,MAAAC,cAAA,MAAA,CACDC,IAAAA,EAAyCU,IAAA5B,EAE5CkB,UAAU,wBAAA,CACVQ,EAECV,MAAAC,cAAA/B,SAAA0D,QACF5B,CAAIE,UAAU,wBAEZd,QAAQ,IACaoB,MAAAvB,CAAA,CAXtB,CAYuBiB,EAVzBF,MAAAC,cAAA,MAAA,CAU0DC,UAAA,+BACrD,EAVJF,MAAAC,cAAC/B,SAUOgC,QAAU,CAA6BA,UACjCzB,+BATbiC,QAWQR,KAAqCM,MAAAtB,CACzCc,CAVJ,EACDA,MAAAC,cAAA,KAAA,CAWMoB,UAAAA,uBAAyB,EAEzBjC,GAAA,EAAAA,EAAA4B,OACC5B,EAAA6B,IAAA,SAAAC,GACFjB,OAAGsB,MAAAA,cAAAA,KAAAA,CAAIM,IAAEX,EAAatB,GAAAM,UAAA,uBAAA,EAACA,MAAAA,cAAAA,KAAAA,CAAAA,UAAU,6BAAA,EAA6BgB,EAAAzC,MAI5D2C,QACH,EAMCpB,MAAAC,cAAA,MAAA,CAAEd,UAAAA,2BAAgB,EACtBe,MAAAA,cAAAA,MAAAA,CACAA,UAAA,iCAONmB,wBAAA,CACCS,OAAAZ,EAAAI,QAAAF,QAvBU,CAAE,CACF,EACDpB,MAAAC,cAAA,IAAA,CAAGsB,KAAML,EAAQa,KAAM7B,UAAU,4BAA4B,EAAC,eAE3D,CACC,CACF,CAAC,CACL,EAEDF,MAAAC,cAAA,KAAA,KAAI,oBAAsB,CAExB,EACJD,MAAAC,cAAA,IAAA,CACCsB,KAAMpC,EACNe,UAAU,yCAAyC,EACnD,kBAEE,CACC,CACD,CACD,CAEP,CACD,CAAC","file":"project-section.js","sourcesContent":["const { registerBlockType } = wp.blocks;\nconst {\n\tRichText,\n\tMediaUpload,\n} = wp.editor;\nconst {\n\tButton,\n\tTextControl,\n} = wp.components;\nconst { withSelect } = wp.data;\n\n// Project Section Block\nregisterBlockType(\"custom-block-plugin/project-section\", {\n\ttitle: \"Project Section\",\n\ticon: \"portfolio\",\n\tcategory: \"common\",\n\tattributes: {\n\t\timageUrl: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\timageAlt: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\tblockText: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\tblockTitle: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\tallProjectsLink: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\tprojects: {\n\t\t\ttype: \"array\",\n\t\t\tdefault: [],\n\t\t},\n\t},\n\tedit: withSelect((select) => {\n\t\tconst { getEntityRecords } = select(\"core\");\n\n\t\t// Fetch categories and projects\n\t\tconst categories = getEntityRecords(\"taxonomy\", \"category\", {\n\t\t\tslug: \"featured\",\n\t\t});\n\n\t\tlet projects = [];\n\t\tif (categories && categories.length > 0) {\n\t\t\tconst featuredCategoryId = categories[0].id;\n\t\t\tprojects = getEntityRecords(\"postType\", \"project\", {\n\t\t\t\tper_page: 5,\n\t\t\t\tcategories: featuredCategoryId,\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tcategories,\n\t\t\tprojects: projects || [],\n\t\t};\n\t})(({ attributes, setAttributes, projects }) => {\n\t\tconst { imageUrl, imageAlt, blockText, blockTitle, allProjectsLink } =\n\t\t\tattributes;\n\n\t\tconst onSelectImage = (media) => {\n\t\t\tsetAttributes({\n\t\t\t\timageUrl: media.url,\n\t\t\t\timageAlt: media.alt,\n\t\t\t});\n\t\t};\n\n\t\tconst onBlockTextChange = (value) => {\n\t\t\tsetAttributes({ blockText: value });\n\t\t};\n\n\t\tconst onBlockTitleChange = (value) => {\n\t\t\tsetAttributes({ blockTitle: value });\n\t\t};\n\n\t\tconst onAllProjectsLinkChange = (value) => {\n\t\t\tsetAttributes({ allProjectsLink: value });\n\t\t};\n\n\t\t// Update projects attribute in block's attributes\n\t\tif (projects && projects.length > 0) {\n\t\t\tsetAttributes({ projects });\n\t\t}\n\n\n\t\tif (!projects) {\n\t\t\treturn <p>Loading projects...</p>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"project-section__wrapper\">\n\t\t\t\t<div className=\"project-section__inner\">\n\t\t\t\t\t<div className=\"project-section__left-column\">\n\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\tonSelect={onSelectImage}\n\t\t\t\t\t\t\t\ttype=\"image\"\n\t\t\t\t\t\t\t\tvalue={imageUrl}\n\t\t\t\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t\t\t\t<Button onClick={open}>Select Image</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{imageUrl && (\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\t\t\t\talt=\"Project Image\"\n\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: \"100%\" }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"project-section__text\"\n\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\tvalue={blockText}\n\t\t\t\t\t\t\tonChange={onBlockTextChange}\n\t\t\t\t\t\t\tplaceholder=\"Enter block text\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"project-section__right-column\">\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"project-section__block-title\"\n\t\t\t\t\t\t\ttagName=\"h2\"\n\t\t\t\t\t\t\tvalue={blockTitle}\n\t\t\t\t\t\t\tonChange={onBlockTitleChange}\n\t\t\t\t\t\t\tplaceholder=\"Enter block title\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ul className=\"project-section__list\">\n\t\t\t\t\t\t\t{projects && projects.length > 0 ? (\n\t\t\t\t\t\t\t\tprojects.map((project) => (\n\t\t\t\t\t\t\t\t\t<li key={project.id} className=\"project-section__item\">\n\t\t\t\t\t\t\t\t\t\t<h3 className=\"project-section__item-title\">\n\t\t\t\t\t\t\t\t\t\t\t{project.title.rendered}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t<div className=\"project-section__item-row\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"project-section__item-subtitle\"\n\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t__html: project.excerpt.rendered,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<a href={project.link} className=\"project-section__item-link\">\n\t\t\t\t\t\t\t\t\t\t\t\tVisit Project\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<li>No projects found.</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tclassName=\"project-section__all-projects-link\"\n\t\t\t\t\t\t\tvalue={allProjectsLink}\n\t\t\t\t\t\t\tonChange={onAllProjectsLinkChange}\n\t\t\t\t\t\t\tplaceholder=\"Enter 'See All Projects' link\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={allProjectsLink}\n\t\t\t\t\t\t\tclassName=\"project-section__all-projects-link-text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSee All&nbsp;Projects\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}),\n\tsave: ({ attributes }) => {\n\t\tconst {\n\t\t\timageUrl,\n\t\t\timageAlt,\n\t\t\tblockText,\n\t\t\tblockTitle,\n\t\t\tallProjectsLink,\n\t\t\tprojects, // Ensure projects are directly accessible here\n\t\t} = attributes;\n\n\t\tconsole.log(\"Attributes in save:\", attributes);\n\n\t\treturn (\n\t\t\t<div className=\"project-section__wrapper\">\n\t\t\t\t<div className=\"project-section__inner\">\n\t\t\t\t\t<div className=\"project-section__left-column\">\n\t\t\t\t\t\t{imageUrl && (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\t\t\talt={imageAlt}\n\t\t\t\t\t\t\t\tclassName=\"project-section__image\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\tclassName=\"project-section__text\"\n\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\tvalue={blockText}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"project-section__right-column\">\n\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\tclassName=\"project-section__block-title\"\n\t\t\t\t\t\t\ttagName=\"h2\"\n\t\t\t\t\t\t\tvalue={blockTitle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ul className=\"project-section__list\">\n\t\t\t\t\t\t\t{/* Ensure projects are correctly retrieved */}\n\t\t\t\t\t\t\t{projects && projects.length > 0 ? (\n\t\t\t\t\t\t\t\tprojects.map((project) => (\n\t\t\t\t\t\t\t\t\t<li key={project.id} className=\"project-section__item\">\n\t\t\t\t\t\t\t\t\t\t<h3 className=\"project-section__item-title\">\n\t\t\t\t\t\t\t\t\t\t\t{project.title.rendered}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t<div className=\"project-section__item-row\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"project-section__item-subtitle\"\n\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t__html: project.excerpt.rendered,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<a href={project.link} className=\"project-section__item-link\">\n\t\t\t\t\t\t\t\t\t\t\t\tVisit Project\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<li>No projects found.</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={allProjectsLink}\n\t\t\t\t\t\t\tclassName=\"project-section__all-projects-link-text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSee All&nbsp;Projects\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t},\n});"]}